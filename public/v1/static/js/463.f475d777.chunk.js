/*! For license information please see 463.f475d777.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[463],{6463:function(e,t,n){var r,a,i=n(4165),s=n(7762),o=n(3433),u=n(5861),c=n(4942),p=n(7825),f=n(3258),l=n(5854),d=n(1413),v=function(e,t){return t.some((function(t){return e instanceof t}))};var h=new WeakMap,g=new WeakMap,x=new WeakMap,b=new WeakMap,m=new WeakMap;var w={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return g.get(e);if("objectStoreNames"===t)return e.objectStoreNames||x.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(I(this),n),Z(h.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Z(e.apply(I(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[I(this),t].concat(r));return x.set(i,t.sort?t.sort():[t]),Z(i)}}function k(e){return"function"===typeof e?y(e):(e instanceof IDBTransaction&&function(e){if(!g.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));g.set(e,t)}}(e),v(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,w):e)}function Z(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(Z(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&h.set(t,e)})).catch((function(){})),m.set(t,e),t}(e);if(b.has(e))return b.get(e);var t=k(e);return t!==e&&(b.set(e,t),m.set(t,e)),t}var I=function(e){return m.get(e)};var S,C=["get","getKey","getAll","getAllKeys","count"],T=["put","add","delete","clear"],D=new Map;function j(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(D.get(t))return D.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=T.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||C.includes(n))){var s=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var s,o,u,c,p,f,l=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),u=o.store,c=l.length,p=new Array(c>1?c-1:0),f=1;f<c;f++)p[f-1]=l[f];return r&&(u=u.index(p.shift())),e.next=6,Promise.all([(s=u)[n].apply(s,p),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return D.set(t,s),s}}}w=function(e){return(0,d.Z)((0,d.Z)({},e),{},{get:function(t,n,r){return j(t,n)||e.get(t,n,r)},has:function(t,n){return!!j(t,n)||e.has(t,n)}})}(w);var E="@firebase/installations",P="0.6.4",q=1e4,B="w:".concat(P),A="FIS_v2",L="https://firebaseinstallations.googleapis.com/v1",N=36e5,O=(S={},(0,c.Z)(S,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,c.Z)(S,"not-registered","Firebase Installation is not registered."),(0,c.Z)(S,"installation-not-found","Firebase Installation not found."),(0,c.Z)(S,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),(0,c.Z)(S,"app-offline","Could not process request. Application offline."),(0,c.Z)(S,"delete-pending-registration","Can't delete installation while there is a pending registration request."),S),M=new l.LL("installations","Installations",O);function K(e){return e instanceof l.ZR&&e.code.includes("request-failed")}function V(e){var t=e.projectId;return"".concat(L,"/projects/").concat(t,"/installations")}function $(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function F(e,t){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,a=r.error,e.abrupt("return",M.create("request-failed",{requestName:t,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function R(e,t){var n=t.refreshToken,r=W(e);return r.append("Authorization",function(e){return"".concat(A," ").concat(e)}(n)),r}function X(e){return _.apply(this,arguments)}function _(){return(_=(0,u.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return J.apply(this,arguments)}function J(){return(J=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o,u,c,p,f,l,d,v,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,a=t.heartbeatServiceProvider,s=n.fid,o=V(r),u=W(r),!(c=a.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,c.getHeartbeatsHeader();case 8:(p=e.sent)&&u.append("x-firebase-client",p);case 10:return f={fid:s,authVersion:A,appId:r.appId,sdkVersion:B},l={method:"POST",headers:u,body:JSON.stringify(f)},e.next=14,X((function(){return fetch(o,l)}));case 14:if(!(d=e.sent).ok){e.next=23;break}return e.next=18,d.json();case 18:return v=e.sent,h={fid:v.fid||s,registrationStatus:2,refreshToken:v.refreshToken,authToken:$(v.authToken)},e.abrupt("return",h);case 23:return e.next=25,F("Create Installation",d);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return new Promise((function(t){setTimeout(t,e)}))}var G=/^[cdef][\w-]{21}$/,Q="";function Y(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,(0,o.Z)(n))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return G.test(t)?t:Q}catch(n){return Q}}function ee(e){return"".concat(e.appName,"!").concat(e.appId)}var te=new Map;function ne(e,t){var n=ee(e);re(n,t),function(e,t){var n=ie();n&&n.postMessage({key:e,fid:t});se()}(n,t)}function re(e,t){var n=te.get(e);if(n){var r,a=(0,s.Z)(n);try{for(a.s();!(r=a.n()).done;){(0,r.value)(t)}}catch(i){a.e(i)}finally{a.f()}}}var ae=null;function ie(){return!ae&&"BroadcastChannel"in self&&((ae=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){re(e.data.key,e.data.fid)}),ae}function se(){0===te.size&&ae&&(ae.close(),ae=null)}var oe="firebase-installations-database",ue=1,ce="firebase-installations-store",pe=null;function fe(){return pe||(pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,s=n.terminated,o=indexedDB.open(e,t),u=Z(o);return a&&o.addEventListener("upgradeneeded",(function(e){a(Z(o.result),e.oldVersion,e.newVersion,Z(o.transaction))})),r&&o.addEventListener("blocked",(function(){return r()})),u.then((function(e){s&&e.addEventListener("close",(function(){return s()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}(oe,ue,{upgrade:function(e,t){if(0===t)e.createObjectStore(ce)}})),pe}function le(e,t){return de.apply(this,arguments)}function de(){return(de=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,fe();case 3:return a=e.sent,s=a.transaction(ce,"readwrite"),o=s.objectStore(ce),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,s.done;case 13:return u&&u.fid===n.fid||ne(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return he.apply(this,arguments)}function he(){return(he=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(t),e.next=3,fe();case 3:return r=e.sent,a=r.transaction(ce,"readwrite"),e.next=7,a.objectStore(ce).delete(n);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){return xe.apply(this,arguments)}function xe(){return(xe=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,fe();case 3:return a=e.sent,s=a.transaction(ce,"readwrite"),o=s.objectStore(ce),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(c=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(c,r);case 17:return e.next=19,s.done;case 19:return!c||u&&u.fid===c.fid||ne(t,c.fid),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return me.apply(this,arguments)}function me(){return(me=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t.appConfig,(function(e){var r=we(e),a=ye(t,r);return n=a.registrationPromise,a.installationEntry}));case 2:if((r=e.sent).fid!==Q){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ce(e||{fid:Y(),registrationStatus:0})}function ye(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(M.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return ke.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ze(e)}:{installationEntry:t}}function ke(){return(ke=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t,n);case 3:return r=e.sent,e.abrupt("return",le(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!K(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,ve(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,le(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ze(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,U(100);case 6:return e.next=8,Se(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,be(t);case 14:if(r=e.sent,a=r.installationEntry,!(s=r.registrationPromise)){e.next=21;break}return e.abrupt("return",s);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return ge(e,(function(e){if(!e)throw M.create("installation-not-found");return Ce(e)}))}function Ce(e){return 1===(t=e).registrationStatus&&t.registrationTime+q<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Te(e,t){return De.apply(this,arguments)}function De(){return(De=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o,u,c,p,f,l,d,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,a=t.heartbeatServiceProvider,s=je(r,n),o=R(r,n),!(u=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(c=e.sent)&&o.append("x-firebase-client",c);case 9:return p={installation:{sdkVersion:B,appId:r.appId}},f={method:"POST",headers:o,body:JSON.stringify(p)},e.next=13,X((function(){return fetch(s,f)}));case 13:if(!(l=e.sent).ok){e.next=22;break}return e.next=17,l.json();case 17:return d=e.sent,v=$(d),e.abrupt("return",v);case 22:return e.next=24,F("Generate Auth Token",l);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t){var n=t.fid;return"".concat(V(e),"/").concat(n,"/authTokens:generate")}function Ee(e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r,a,s,o=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,ge(t.appConfig,(function(e){if(!Oe(e))throw M.create("not-registered");var a=e.authToken;if(!n&&Me(a))return e;if(1===a.requestStatus)return r=qe(t,n),e;if(!navigator.onLine)throw M.create("app-offline");var i=Ke(e);return r=Le(t,i),i}));case 3:if(a=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=a.authToken;case 11:return s=e.t0,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function qe(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,U(100);case 6:return e.next=8,Ae(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(a=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Ee(t,n));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return ge(e,(function(e){if(!Oe(e))throw M.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+q<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function Le(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(t,n);case 3:return r=e.sent,a=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,le(t.appConfig,a);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!K(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,ve(t.appConfig);case 15:e.next=20;break;case 17:return s=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,le(t.appConfig,s);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Oe(e){return void 0!==e&&2===e.registrationStatus}function Me(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+N}(e)}function Ke(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Ve(){return(Ve=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,be(n);case 3:return r=e.sent,a=r.installationEntry,(s=r.registrationPromise)?s.catch(console.error):Ee(n).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return $e=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r,a,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=t,e.next=4,Fe(r);case 4:return e.next=6,Ee(r,n);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function Fe(e){return He.apply(this,arguments)}function He(){return(He=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return M.create("missing-app-config-values",{valueName:e})}var Re="installations",Xe=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw We("App Configuration");if(!e.name)throw We("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw We(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,p.qX)(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},_e=function(e){var t=e.getProvider("app").getImmediate(),n=(0,p.qX)(t,Re).getImmediate(),r={getId:function(){return function(e){return Ve.apply(this,arguments)}(n)},getToken:function(e){return function(e){return $e.apply(this,arguments)}(n,e)}};return r};(0,p.Xd)(new f.wA(Re,Xe,"PUBLIC")),(0,p.Xd)(new f.wA("installations-internal",_e,"PRIVATE")),(0,p.KN)(E,P),(0,p.KN)(E,P,"esm2017")}}]);
//# sourceMappingURL=463.f475d777.chunk.js.map