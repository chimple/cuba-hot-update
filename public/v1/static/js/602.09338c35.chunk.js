/*! For license information please see 602.09338c35.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[602],{4602:function(e,t,n){n.r(t),n.d(t,{FirebaseRemoteConfigWeb:function(){return H}});var r,i=n(4165),a=n(5861),s=n(5671),o=n(3144),c=n(136),u=n(9388),l=n(6653),h=n(9439),f=n(4942),g=n(7825),p=n(5854),v=n(3258),m=n(6781),d=(n(6463),"@firebase/remote-config"),w="0.4.4",k=function(){function e(){(0,s.Z)(this,e),this.listeners=[]}return(0,o.Z)(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}(),y="remote-config",Z=(r={},(0,f.Z)(r,"registration-window","Undefined window object. This SDK only supports usage in a browser environment."),(0,f.Z)(r,"registration-project-id","Undefined project identifier. Check Firebase app initialization."),(0,f.Z)(r,"registration-api-key","Undefined API key. Check Firebase app initialization."),(0,f.Z)(r,"registration-app-id","Undefined app identifier. Check Firebase app initialization."),(0,f.Z)(r,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,f.Z)(r,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,f.Z)(r,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,f.Z)(r,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),(0,f.Z)(r,"fetch-client-network","Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,f.Z)(r,"fetch-timeout",'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),(0,f.Z)(r,"fetch-throttle",'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),(0,f.Z)(r,"fetch-client-parse","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,f.Z)(r,"fetch-status","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,f.Z)(r,"indexed-db-unavailable","Indexed DB is not supported by current browser"),r),_=new p.LL("remoteconfig","Remote Config",Z);var b=["1","true","t","yes","y","on"],x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,s.Z)(this,e),this._source=t,this._value=n}return(0,o.Z)(e,[{key:"asString",value:function(){return this._value}},{key:"asBoolean",value:function(){return"static"!==this._source&&b.indexOf(this._value.toLowerCase())>=0}},{key:"asNumber",value:function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e}},{key:"getSource",value:function(){return this._source}}]),e}();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.Mq)();return e=(0,p.m9)(e),(0,g.qX)(e,y).getImmediate()}function S(e){return M.apply(this,arguments)}function M(){return(M=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.m9)(t),e.next=3,Promise.all([n._storage.getLastSuccessfulFetchResponse(),n._storage.getActiveConfigEtag()]);case 3:if(r=e.sent,a=(0,h.Z)(r,2),s=a[0],o=a[1],s&&s.config&&s.eTag&&s.eTag!==o){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,Promise.all([n._storageCache.setActiveConfig(s.config),n._storage.setActiveConfigEtag(s.eTag)]);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return F.apply(this,arguments)}function F(){return(F=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.m9)(t),r=new k,setTimeout((0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.abort();case 1:case"end":return e.stop()}}),e)}))),n.settings.fetchTimeoutMillis),e.prev=3,e.next=6,n._client.fetch({cacheMaxAgeMillis:n.settings.minimumFetchIntervalMillis,signal:r});case 6:return e.next=8,n._storageCache.setLastFetchStatus("success");case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(3),o=e.t0,c="fetch-throttle",s=o instanceof p.ZR&&-1!==o.code.indexOf(c)?"throttle":"failure",e.next=15,n._storageCache.setLastFetchStatus(s);case 15:throw e.t0;case 16:case"end":return e.stop()}var o,c}),e,null,[[3,10]])})))).apply(this,arguments)}function E(e,t){return P((0,p.m9)(e),t).asBoolean()}function I(e,t){return P((0,p.m9)(e),t).asNumber()}function L(e,t){return P((0,p.m9)(e),t).asString()}function P(e,t){var n=(0,p.m9)(e);n._isInitializationComplete||n._logger.debug('A value was requested for key "'.concat(t,'" before SDK initialization completed.')+" Await on ensureInitialized if the intent was to get a previously activated value.");var r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new x("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new x("default",String(n.defaultConfig[t])):(n._logger.debug('Returning static value for key "'.concat(t,'".')+" Define a default or remote value if this is unintentional."),new x("static"))}var A=function(){function e(t,n,r,i){(0,s.Z)(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return(0,o.Z)(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(n,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(e,".")+" Is cache hit: ".concat(r,".")),r}},{key:"fetch",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,s,o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);case 2:if(n=e.sent,r=(0,h.Z)(n,2),a=r[0],!(s=r[1])||!this.isCachedDataFresh(t.cacheMaxAgeMillis,a)){e.next=8;break}return e.abrupt("return",s);case 8:return t.eTag=s&&s.eTag,e.next=11,this.client.fetch(t);case 11:return o=e.sent,c=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&c.push(this.storage.setLastSuccessfulFetchResponse(o)),e.next=16,Promise.all(c);case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var N=function(){function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return(0,o.Z)(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,s,o,c,u,l,f,g,p,v,m,d,w,k,y,Z;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]);case 2:return n=e.sent,r=(0,h.Z)(n,2),a=r[0],s=r[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",c="".concat(o,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:a,app_instance_id_token:s,app_id:this.appId,language_code:D()},f={method:"POST",headers:u,body:JSON.stringify(l)},g=fetch(c,f),p=new Promise((function(e,n){t.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),e.prev=13,e.next=16,Promise.race([g,p]);case 16:return e.next=18,g;case 18:v=e.sent,e.next=26;break;case 21:throw e.prev=21,e.t0=e.catch(13),m="fetch-client-network","AbortError"===(null===e.t0||void 0===e.t0?void 0:e.t0.name)&&(m="fetch-timeout"),_.create(m,{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 26:if(d=v.status,w=v.headers.get("ETag")||void 0,200!==v.status){e.next=40;break}return e.prev=29,e.next=32,v.json();case 32:Z=e.sent,e.next=38;break;case 35:throw e.prev=35,e.t1=e.catch(29),_.create("fetch-client-parse",{originalErrorMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 38:k=Z.entries,y=Z.state;case 40:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(k={}),304===d||200===d){e.next=43;break}throw _.create("fetch-status",{httpStatus:d});case 43:return e.abrupt("return",{status:d,eTag:w,config:k});case 44:case"end":return e.stop()}}),e,this,[[13,21],[29,35]])})));return function(t){return e.apply(this,arguments)}}())}]),e}();function O(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(_.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function R(e){if(!(e instanceof p.ZR)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var j=function(){function e(t,n){(0,s.Z)(this,e),this.client=t,this.storage=n}return(0,o.Z)(e,[{key:"fetch",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getThrottleMetadata();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return n=e.t0,e.abrupt("return",this.attemptFetch(t,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"attemptFetch",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.throttleEndTimeMillis,a=n.backoffCount,e.next=3,O(t.signal,r);case 3:return e.prev=3,e.next=6,this.client.fetch(t);case 6:return s=e.sent,e.next=9,this.storage.deleteThrottleMetadata();case 9:return e.abrupt("return",s);case 12:if(e.prev=12,e.t0=e.catch(3),R(e.t0)){e.next=16;break}throw e.t0;case 16:return o={throttleEndTimeMillis:Date.now()+(0,p.$s)(a),backoffCount:a+1},e.next=19,this.storage.setThrottleMetadata(o);case 19:return e.abrupt("return",this.attemptFetch(t,o));case 20:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),K=function(){function e(t,n,r,i,a){(0,s.Z)(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return(0,o.Z)(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function z(e,t){var n=e.target.error||void 0;return _.create(t,{originalErrorMessage:n&&(null===n||void 0===n?void 0:n.message)})}var U="app_namespace_store";var $=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise((function(e,t){try{var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(z(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(U,{keyPath:"compositeKey"})}}catch(r){t(_.create("storage-open",{originalErrorMessage:null===r||void 0===r?void 0:r.message}))}}));(0,s.Z)(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return(0,o.Z)(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,i){var a=n.transaction([U],"readonly").objectStore(U),s=r.createCompositeKey(t);try{var o=a.get(s);o.onerror=function(e){i(z(e,"storage-get"))},o.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)}}catch(c){i(_.create("storage-get",{originalErrorMessage:null===c||void 0===c?void 0:c.message}))}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return r=e.sent,e.abrupt("return",new Promise((function(e,i){var s=r.transaction([U],"readwrite").objectStore(U),o=a.createCompositeKey(t);try{var c=s.put({compositeKey:o,value:n});c.onerror=function(e){i(z(e,"storage-set"))},c.onsuccess=function(){e()}}catch(u){i(_.create("storage-set",{originalErrorMessage:null===u||void 0===u?void 0:u.message}))}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbPromise;case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,i){var a=n.transaction([U],"readwrite").objectStore(U),s=r.createCompositeKey(t);try{var o=a.delete(s);o.onerror=function(e){i(z(e,"storage-delete"))},o.onsuccess=function(){e()}}catch(c){i(_.create("storage-delete",{originalErrorMessage:null===c||void 0===c?void 0:c.message}))}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),B=function(){function e(t){(0,s.Z)(this,e),this.storage=t}return(0,o.Z)(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),e.next=5,t;case 5:return(a=e.sent)&&(this.lastFetchStatus=a),e.next=9,n;case 9:return(s=e.sent)&&(this.lastSuccessfulFetchTimestampMillis=s),e.next=13,r;case 13:(o=e.sent)&&(this.activeConfig=o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function q(e){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.m9)(t),e.next=3,T(t);case 3:return e.abrupt("return",S(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,g.Xd)(new v.wA(y,(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"===typeof window)throw _.create("registration-window");if(!(0,p.hl)())throw _.create("indexed-db-unavailable");var a=r.options,s=a.projectId,o=a.apiKey,c=a.appId;if(!s)throw _.create("registration-project-id");if(!o)throw _.create("registration-api-key");if(!c)throw _.create("registration-app-id");n=n||"firebase";var u=new $(c,r.name,n),l=new B(u),h=new m.Yd(d);h.logLevel=m.in.ERROR;var f=new N(i,g.Jn,n,s,o,c),v=new j(f,u),w=new A(v,u,l,h),k=new K(r,w,l,u,h);return function(e){var t=(0,p.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),t._initializePromise}(k),k}),"PUBLIC").setMultipleInstances(!0)),(0,g.KN)(d,w),(0,g.KN)(d,w,"esm2017");var H=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"activate",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(),e.next=3,S(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAndActivate",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(),e.next=3,q(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchConfig",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(),e.next=3,T(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getBoolean",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(),r=E(n,t.key),e.abrupt("return",{value:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNumber",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(),r=I(n,t.key),e.abrupt("return",{value:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getString",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(),r=L(n,t.key),e.abrupt("return",{value:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMinimumFetchInterval",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C().settings.minimumFetchIntervalMillis=1e3*t.minimumFetchIntervalInSeconds;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(l.Uw)}}]);
//# sourceMappingURL=602.09338c35.chunk.js.map