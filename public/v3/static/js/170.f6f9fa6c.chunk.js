/*! For license information please see 170.f6f9fa6c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[170],{7170:function(e,n,t){t.r(n),t.d(n,{FirebaseMessagingWeb:function(){return fn}});var r,a,i=t(4165),o=t(5861),s=t(5671),c=t(3144),u=t(136),p=t(9388),f=t(6653),d=t(4942),l=t(3433),v=(t(6463),t(3258)),h=t(1413),b=function(e,n){return n.some((function(n){return e instanceof n}))};var g=new WeakMap,w=new WeakMap,y=new WeakMap,k=new WeakMap,m=new WeakMap;var x={get:function(e,n,t){if(e instanceof IDBTransaction){if("done"===n)return w.get(e);if("objectStoreNames"===n)return e.objectStoreNames||y.get(e);if("store"===n)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return S(e[n])},set:function(e,n,t){return e[n]=t,!0},has:function(e,n){return e instanceof IDBTransaction&&("done"===n||"store"===n)||n in e}};function Z(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.apply(T(this),t),S(g.get(this))}:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return S(e.apply(T(this),t))}:function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[T(this),n].concat(r));return y.set(i,n.sort?n.sort():[n]),S(i)}}function I(e){return"function"===typeof e?Z(e):(e instanceof IDBTransaction&&function(e){if(!w.has(e)){var n=new Promise((function(n,t){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){n(),r()},i=function(){t(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));w.set(e,n)}}(e),b(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,x):e)}function S(e){if(e instanceof IDBRequest)return function(e){var n=new Promise((function(n,t){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){n(S(e.result)),r()},i=function(){t(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return n.then((function(n){n instanceof IDBCursor&&g.set(n,e)})).catch((function(){})),m.set(n,e),n}(e);if(k.has(e))return k.get(e);var n=I(e);return n!==e&&(k.set(e,n),m.set(n,e)),n}var T=function(e){return m.get(e)};function D(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.blocked,a=t.upgrade,i=t.blocking,o=t.terminated,s=indexedDB.open(e,n),c=S(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(S(s.result),e.oldVersion,e.newVersion,S(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),c.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),c}function E(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,t=indexedDB.deleteDatabase(e);return n&&t.addEventListener("blocked",(function(){return n()})),S(t).then((function(){}))}var A=["get","getKey","getAll","getAllKeys","count"],N=["put","add","delete","clear"],C=new Map;function K(e,n){if(e instanceof IDBDatabase&&!(n in e)&&"string"===typeof n){if(C.get(n))return C.get(n);var t=n.replace(/FromIndex$/,""),r=n!==t,a=N.includes(t);if(t in(r?IDBIndex:IDBObjectStore).prototype&&(a||A.includes(t))){var s=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var o,s,c,u,p,f,d=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(n,a?"readwrite":"readonly"),c=s.store,u=d.length,p=new Array(u>1?u-1:0),f=1;f<u;f++)p[f-1]=d[f];return r&&(c=c.index(p.shift())),e.next=6,Promise.all([(o=c)[t].apply(o,p),a&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}();return C.set(n,s),s}}}x=function(e){return(0,h.Z)((0,h.Z)({},e),{},{get:function(n,t,r){return K(n,t)||e.get(n,t,r)},has:function(n,t){return!!K(n,t)||e.has(n,t)}})}(x);var P,M,O,j=t(5854),_=t(7825),L="/firebase-messaging-sw.js",R="/firebase-cloud-messaging-push-scope",B="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",W="https://fcmregistrations.googleapis.com/v1",F="google.c.a.c_id",U="google.c.a.c_l",H="google.c.a.ts",q="google.c.a.e";function V(e){var n=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,l.Z)(n))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $(e){for(var n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=atob(n),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(M||(M={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(O||(O={}));var G="fcm_token_details_db",z=5,X="fcm_token_object_Store";function J(e){return Y.apply(this,arguments)}function Y(){return Y=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("databases"in indexedDB)){e.next=7;break}return e.next=3,indexedDB.databases();case 3:if(t=e.sent,r=t.map((function(e){return e.name})),r.includes(G)){e.next=7;break}return e.abrupt("return",null);case 7:return a=null,e.next=10,D(G,z,{upgrade:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,o,s){var c,u,p,f,d,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<2)){e.next=2;break}return e.abrupt("return");case 2:if(t.objectStoreNames.contains(X)){e.next=4;break}return e.abrupt("return");case 4:return u=s.objectStore(X),e.next=7,u.index("fcmSenderId").get(n);case 7:return p=e.sent,e.next=10,u.clear();case 10:if(p){e.next=12;break}return e.abrupt("return");case 12:if(2!==r){e.next=19;break}if((f=p).auth&&f.p256dh&&f.endpoint){e.next=16;break}return e.abrupt("return");case 16:a={token:f.fcmToken,createTime:null!==(c=f.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:"string"===typeof f.vapidKey?f.vapidKey:V(f.vapidKey)}},e.next=20;break;case 19:3===r?a={token:(d=p).fcmToken,createTime:d.createTime,subscriptionOptions:{auth:V(d.auth),p256dh:V(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:V(d.vapidKey)}}:4===r&&(a={token:(l=p).fcmToken,createTime:l.createTime,subscriptionOptions:{auth:V(l.auth),p256dh:V(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:V(l.vapidKey)}});case 20:case"end":return e.stop()}}),e)})));return function(n,t,r,a){return e.apply(this,arguments)}}()});case 10:return e.sent.close(),e.next=14,E(G);case 14:return e.next=16,E("fcm_vapid_details_db");case 16:return e.next=18,E("undefined");case 18:return e.abrupt("return",Q(a)?a:null);case 19:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function Q(e){if(!e||!e.subscriptionOptions)return!1;var n=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof n.auth&&n.auth.length>0&&"string"===typeof n.p256dh&&n.p256dh.length>0&&"string"===typeof n.endpoint&&n.endpoint.length>0&&"string"===typeof n.swScope&&n.swScope.length>0&&"string"===typeof n.vapidKey&&n.vapidKey.length>0}var ee="firebase-messaging-database",ne=1,te="firebase-messaging-store",re=null;function ae(){return re||(re=D(ee,ne,{upgrade:function(e,n){if(0===n)e.createObjectStore(te)}})),re}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fe(n),e.next=3,ae();case 3:return r=e.sent,e.next=6,r.transaction(te).objectStore(te).get(t);case 6:if(!(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:return e.next=13,J(n.appConfig.senderId);case 13:if(!(o=e.sent)){e.next=18;break}return e.next=17,se(n,o);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,n){return ce.apply(this,arguments)}function ce(){return(ce=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(n),e.next=3,ae();case 3:return a=e.sent,o=a.transaction(te,"readwrite"),e.next=7,o.objectStore(te).put(t,r);case 7:return e.next=9,o.done;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return pe.apply(this,arguments)}function pe(){return(pe=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fe(n),e.next=3,ae();case 3:return r=e.sent,a=r.transaction(te,"readwrite"),e.next=7,a.objectStore(te).delete(t);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return e.appConfig.appId}var de=(P={},(0,d.Z)(P,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,d.Z)(P,"only-available-in-window","This method is available in a Window context."),(0,d.Z)(P,"only-available-in-sw","This method is available in a service worker context."),(0,d.Z)(P,"permission-default","The notification permission was not granted and dismissed instead."),(0,d.Z)(P,"permission-blocked","The notification permission was not granted and blocked instead."),(0,d.Z)(P,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,d.Z)(P,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,d.Z)(P,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,d.Z)(P,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,d.Z)(P,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,d.Z)(P,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,d.Z)(P,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,d.Z)(P,"token-update-no-token","FCM returned no token when updating the user to push."),(0,d.Z)(P,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,d.Z)(P,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,d.Z)(P,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,d.Z)(P,"invalid-vapid-key","The public VAPID key must be a string."),(0,d.Z)(P,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),P),le=new j.LL("messaging","Messaging",de);function ve(e,n){return he.apply(this,arguments)}function he(){return(he=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a,o,s,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(n);case 2:return r=e.sent,a=Ze(t),o={method:"POST",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch(ke(n.appConfig),o);case 8:return c=e.sent,e.next=11,c.json();case 11:s=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),le.create("token-subscribe-failed",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()});case 17:if(!s.error){e.next=20;break}throw u=s.error.message,le.create("token-subscribe-failed",{errorInfo:u});case 20:if(s.token){e.next=22;break}throw le.create("token-subscribe-no-token");case 22:return e.abrupt("return",s.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function be(e,n){return ge.apply(this,arguments)}function ge(){return(ge=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a,o,s,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(n);case 2:return r=e.sent,a=Ze(t.subscriptionOptions),o={method:"PATCH",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch("".concat(ke(n.appConfig),"/").concat(t.token),o);case 8:return c=e.sent,e.next=11,c.json();case 11:s=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),le.create("token-update-failed",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()});case 17:if(!s.error){e.next=20;break}throw u=s.error.message,le.create("token-update-failed",{errorInfo:u});case 20:if(s.token){e.next=22;break}throw le.create("token-update-no-token");case 22:return e.abrupt("return",s.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function we(e,n){return ye.apply(this,arguments)}function ye(){return(ye=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a,o,s,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(n);case 2:return r=e.sent,a={method:"DELETE",headers:r},e.prev=4,e.next=7,fetch("".concat(ke(n.appConfig),"/").concat(t),a);case 7:return o=e.sent,e.next=10,o.json();case 10:if(!(s=e.sent).error){e.next=14;break}throw c=s.error.message,le.create("token-unsubscribe-failed",{errorInfo:c});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(4),le.create("token-unsubscribe-failed",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()});case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}function ke(e){var n=e.projectId;return"".concat(W,"/projects/").concat(n,"/registrations")}function me(e){return xe.apply(this,arguments)}function xe(){return(xe=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.appConfig,r=n.installations,e.next=3,r.getToken();case 3:return a=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(a)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){var n=e.p256dh,t=e.auth,r=e.endpoint,a=e.vapidKey,i={web:{endpoint:r,auth:t,p256dh:n}};return a!==B&&(i.web.applicationPubKey=a),i}var Ie=6048e5;function Se(e){return Te.apply(this,arguments)}function Te(){return(Te=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(n.swRegistration,n.vapidKey);case 2:return t=e.sent,r={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:V(t.getKey("auth")),p256dh:V(t.getKey("p256dh"))},e.next=6,ie(n.firebaseDependencies);case 6:if(a=e.sent){e.next=11;break}return e.abrupt("return",Ce(n.firebaseDependencies,r));case 11:if(Oe(a.subscriptionOptions,r)){e.next=23;break}return e.prev=12,e.next=15,we(n.firebaseDependencies,a.token);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.warn(e.t0);case 20:return e.abrupt("return",Ce(n.firebaseDependencies,r));case 23:if(!(Date.now()>=a.createTime+Ie)){e.next=27;break}return e.abrupt("return",Ae(n,{token:a.token,createTime:Date.now(),subscriptionOptions:r}));case 27:return e.abrupt("return",a.token);case 28:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}function De(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(n.firebaseDependencies);case 2:if(!(t=e.sent)){e.next=8;break}return e.next=6,we(n.firebaseDependencies,t.token);case 6:return e.next=8,ue(n.firebaseDependencies);case 8:return e.next=10,n.swRegistration.pushManager.getSubscription();case 10:if(!(r=e.sent)){e.next=13;break}return e.abrupt("return",r.unsubscribe());case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,n){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be(n.firebaseDependencies,t);case 3:return r=e.sent,a=Object.assign(Object.assign({},t),{token:r,createTime:Date.now()}),e.next=7,se(n.firebaseDependencies,a);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,De(n);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Ce(e,n){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(n,t);case 2:return r=e.sent,a={token:r,createTime:Date.now(),subscriptionOptions:t},e.next=6,se(n,a);case 6:return e.abrupt("return",a.token);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,n){return Me.apply(this,arguments)}function Me(){return(Me=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.pushManager.getSubscription();case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$(t)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,n){var t=n.vapidKey===e.vapidKey,r=n.endpoint===e.endpoint,a=n.auth===e.auth,i=n.p256dh===e.p256dh;return t&&r&&a&&i}function je(e){var n={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,n){if(!n.notification)return;e.notification={};var t=n.notification.title;t&&(e.notification.title=t);var r=n.notification.body;r&&(e.notification.body=r);var a=n.notification.image;a&&(e.notification.image=a);var i=n.notification.icon;i&&(e.notification.icon=i)}(n,e),function(e,n){if(!n.data)return;e.data=n.data}(n,e),function(e,n){var t,r,a,i,o;if(!n.fcmOptions&&!(null===(t=n.notification)||void 0===t?void 0:t.click_action))return;e.fcmOptions={};var s=null!==(a=null===(r=n.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==a?a:null===(i=n.notification)||void 0===i?void 0:i.click_action;s&&(e.fcmOptions.link=s);var c=null===(o=n.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}(n,e),n}function _e(e,n){for(var t=[],r=0;r<e.length;r++)t.push(e.charAt(r)),r<n.length&&t.push(n.charAt(r));return t.join("")}function Le(e){return le.create("missing-app-config-values",{valueName:e})}_e("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_e("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var Re=function(){function e(n,t,r){(0,s.Z)(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var a=function(e){if(!e||!e.options)throw Le("App Configuration Object");if(!e.name)throw Le("App Name");for(var n=e.options,t=0,r=["projectId","apiKey","appId","messagingSenderId"];t<r.length;t++){var a=r[t];if(!n[a])throw Le(a)}return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(n);this.firebaseDependencies={app:n,appConfig:a,installations:t,analyticsProvider:r}}return(0,c.Z)(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function Be(e){return We.apply(this,arguments)}function We(){return(We=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register(L,{scope:R});case 3:n.swRegistration=e.sent,n.swRegistration.update().catch((function(){})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),le.create("failed-service-worker-registration",{browserErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Fe(e,n){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,o.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||n.swRegistration){e.next=3;break}return e.next=3,Be(n);case 3:if(t||!n.swRegistration){e.next=5;break}return e.abrupt("return");case 5:if(t instanceof ServiceWorkerRegistration){e.next=7;break}throw le.create("invalid-sw-registration");case 7:n.swRegistration=t;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,n){return qe.apply(this,arguments)}function qe(){return(qe=(0,o.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?n.vapidKey=t:n.vapidKey||(n.vapidKey=B);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,n){return $e.apply(this,arguments)}function $e(){return($e=(0,o.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw le.create("only-available-in-window");case 2:if("default"!==Notification.permission){e.next=5;break}return e.next=5,Notification.requestPermission();case 5:if("granted"===Notification.permission){e.next=7;break}throw le.create("permission-blocked");case 7:return e.next=9,He(n,null===t||void 0===t?void 0:t.vapidKey);case 9:return e.next=11,Fe(n,null===t||void 0===t?void 0:t.serviceWorkerRegistration);case 11:return e.abrupt("return",Se(n));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,n,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,o.Z)((0,i.Z)().mark((function e(n,t,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xe(t),e.next=3,n.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(a,{message_id:r[F],message_name:r[U],message_time:r[H],message_device_time:Math.floor(Date.now()/1e3)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){switch(e){case O.NOTIFICATION_CLICKED:return"notification_open";case O.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Je(){return(Je=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(n.onMessageHandler&&r.messageType===O.PUSH_RECEIVED&&("function"===typeof n.onMessageHandler?n.onMessageHandler(je(r)):n.onMessageHandler.next(je(r))),a=r.data,"object"!==typeof(i=a)||!i||!(F in i)||"1"!==a[q]){e.next=8;break}return e.next=8,Ge(n,r.messageType,a);case 8:case"end":return e.stop()}var i}),e)})))).apply(this,arguments)}var Ye="@firebase/messaging",Qe="0.12.4",en=function(e){var n=new Re(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(function(e){return function(e,n){return Je.apply(this,arguments)}(n,e)})),n},nn=function(e){var n=e.getProvider("messaging").getImmediate();return{getToken:function(e){return Ve(n,e)}}};function tn(){return rn.apply(this,arguments)}function rn(){return(rn=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.eu)();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",!1);case 8:return e.abrupt("return","undefined"!==typeof window&&(0,j.hl)()&&(0,j.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function an(){return(an=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw le.create("only-available-in-window");case 2:if(n.swRegistration){e.next=5;break}return e.next=5,Be(n);case 5:return e.abrupt("return",De(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_.Mq)();return tn().then((function(e){if(!e)throw le.create("unsupported-browser")}),(function(e){throw le.create("indexed-db-unsupported")})),(0,_.qX)((0,j.m9)(e),"messaging").getImmediate()}function sn(e,n){return cn.apply(this,arguments)}function cn(){return(cn=(0,o.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,j.m9)(n),e.abrupt("return",Ve(n,t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function un(e){return function(e){return an.apply(this,arguments)}(e=(0,j.m9)(e))}function pn(e,n){return function(e,n){if(!navigator)throw le.create("only-available-in-window");return e.onMessageHandler=n,function(){e.onMessageHandler=null}}(e=(0,j.m9)(e),n)}(0,_.Xd)(new v.wA("messaging",en,"PUBLIC")),(0,_.Xd)(new v.wA("messaging-internal",nn,"PRIVATE")),(0,_.KN)(Ye,Qe),(0,_.KN)(Ye,Qe,"esm2017");var fn=function(e){(0,u.Z)(t,e);var n=(0,p.Z)(t);function t(){var e;return(0,s.Z)(this,t),e=n.call(this),tn().then((function(n){n&&pn(on(),(function(n){return e.handleNotificationReceived(n)}))})),e}return(0,c.Z)(t,[{key:"checkPermissions",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.convertNotificationPermissionToPermissionState(Notification.permission),e.abrupt("return",{receive:n});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestPermissions",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:return n=e.sent,t=this.convertNotificationPermissionToPermissionState(n),e.abrupt("return",{receive:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isSupported",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn();case 2:return n=e.sent,e.abrupt("return",{isSupported:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getToken",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=on(),e.next=3,sn(t,{vapidKey:n.vapidKey,serviceWorkerRegistration:n.serviceWorkerRegistration});case 3:return r=e.sent,e.abrupt("return",{token:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"deleteToken",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=on(),e.next=3,un(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getDeliveredNotifications",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeDeliveredNotifications",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"removeAllDeliveredNotifications",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribeToTopic",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"unsubscribeFromTopic",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"deleteChannel",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"listChannels",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.throwUnavailableError();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleNotificationReceived",value:function(e){var n={notification:this.createNotificationResult(e)};this.notifyListeners(t.notificationReceivedEvent,n)}},{key:"createNotificationResult",value:function(e){var n,t,r;return{body:null===(n=e.notification)||void 0===n?void 0:n.body,data:e.data,id:e.messageId,image:null===(t=e.notification)||void 0===t?void 0:t.image,title:null===(r=e.notification)||void 0===r?void 0:r.title}}},{key:"convertNotificationPermissionToPermissionState",value:function(e){var n="prompt";switch(e){case"granted":n="granted";break;case"denied":n="denied"}return n}},{key:"throwUnavailableError",value:function(){throw this.unavailable("Not available on web.")}}]),t}(f.Uw);fn.notificationReceivedEvent="notificationReceived"}}]);
//# sourceMappingURL=170.f6f9fa6c.chunk.js.map