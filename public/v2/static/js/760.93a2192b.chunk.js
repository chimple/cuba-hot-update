"use strict";(self.webpackChunkcuba=self.webpackChunkcuba||[]).push([[760],{1760:function(e,r,n){n.r(r),n.d(r,{FirebaseAuthenticationWeb:function(){return h}});var t=n(7762),a=n(4165),i=n(5861),u=n(5671),s=n(3144),c=n(136),o=n(9388),p=n(9565),l=n(2987),f=n(4517),h=function(e){(0,c.Z)(n,e);var r=(0,o.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=r.call(this)).lastConfirmationResult=new Map,(0,l.v0)().onAuthStateChanged((function(r){return e.handleAuthStateChange(r)})),e}return(0,s.Z)(n,[{key:"applyActionCode",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.abrupt("return",(0,l.iA)(n,r.oobCode));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"createUserWithEmailAndPassword",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.next=3,(0,l.Xb)(n,r.email,r.password);case 3:return t=e.sent,e.abrupt("return",this.createSignInResult(t,null));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"confirmPasswordReset",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.abrupt("return",(0,l.LG)(n,r.oobCode,r.newPassword));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"confirmVerificationCode",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.verificationCode,i=r.verificationId,u=this.lastConfirmationResult.get(i)){e.next=4;break}throw new Error(n.ERROR_CONFIRMATION_RESULT_MISSING);case 4:return e.next=6,u.confirm(t);case 6:return s=e.sent,e.abrupt("return",this.createSignInResult(s,null));case 8:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,l.v0)(),t=r.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:return e.abrupt("return",(0,l.h8)(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.v0)(),n=this.createUserResult(r.currentUser),t={user:n},e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIdToken",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=(0,l.v0)()).currentUser){e.next=3;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 3:return e.next=5,t.currentUser.getIdToken(null===r||void 0===r?void 0:r.forceRefresh);case 5:return i=e.sent,u={token:i||""},e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"getRedirectResult",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.v0)(),e.next=3,(0,l.cx)(r);case 3:return n=e.sent,t=n?l.O4.credentialFromResult(n):null,e.abrupt("return",this.createSignInResult(n,t));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTenantId",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.v0)(),e.abrupt("return",{tenantId:r.tenantId});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isSignInWithEmailLink",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.abrupt("return",{isSignInWithEmailLink:(0,l.JB)(n,r.emailLink)});case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithApple",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.O4(f.F.APPLE),this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.O4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithEmailAndPassword",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.w9.credential(r.email,r.password),e.next=3,this.linkCurrentUserWithCredential(n);case 3:return t=e.sent,e.abrupt("return",this.createSignInResult(t,n));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithEmailLink",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.w9.credentialWithLink(r.email,r.emailLink),e.next=3,this.linkCurrentUserWithCredential(n);case 3:return t=e.sent,e.abrupt("return",this.createSignInResult(t,n));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithFacebook",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l._O,this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l._O.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithGameCenter",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not available on web.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"linkWithGithub",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.GH,this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.GH.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithGoogle",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.hJ,this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.hJ.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithMicrosoft",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.O4(f.F.MICROSOFT),this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.O4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i,u,s,c,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,l.v0)(),i=t.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:if(r.phoneNumber){e.next=6;break}throw new Error(n.ERROR_PHONE_NUMBER_MISSING);case 6:if(r.recaptchaVerifier&&r.recaptchaVerifier instanceof l.lI){e.next=8;break}throw new Error(n.ERROR_RECAPTCHA_VERIFIER_MISSING);case 8:return e.prev=8,e.next=11,(0,l.L6)(i,r.phoneNumber,r.recaptchaVerifier);case 11:u=e.sent,s=u.verificationId,this.lastConfirmationResult.set(s,u),c={verificationId:s},this.notifyListeners(n.PHONE_CODE_SENT_EVENT,c),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(8),o={message:this.getErrorMessage(e.t0)},this.notifyListeners(n.PHONE_VERIFICATION_FAILED_EVENT,o);case 22:case"end":return e.stop()}}),e,this,[[8,18]])})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithPlayGames",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not available on web.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"linkWithTwitter",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.c4,this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.c4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"linkWithYahoo",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.O4(f.F.YAHOO),this.applySignInOptions(r||{},n),e.next=4,this.linkCurrentUserWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.O4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,l.v0)(),t=r.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:return e.abrupt("return",(0,l.H5)(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,l.v0)(),t=r.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:return e.abrupt("return",(0,l.w$)(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"sendPasswordResetEmail",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.abrupt("return",(0,l.LS)(n,r.email));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"sendSignInLinkToEmail",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.abrupt("return",(0,l.oo)(n,r.email,r.actionCodeSettings));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"setLanguageCode",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.v0)().languageCode=r.languageCode;case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,l.v0)(),e.t0=r.persistence,e.next=e.t0===f.n.BrowserLocal?4:e.t0===f.n.BrowserSession?7:e.t0===f.n.IndexedDbLocal?10:e.t0===f.n.InMemory?13:16;break;case 4:return e.next=6,(0,l.Fb)(n,l.a$);case 6:case 9:case 12:case 15:return e.abrupt("break",16);case 7:return e.next=9,(0,l.Fb)(n,l.aT);case 10:return e.next=12,(0,l.Fb)(n,l.AP);case 13:return e.next=15,(0,l.Fb)(n,l.BV);case 16:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"setTenantId",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.v0)().tenantId=r.tenantId;case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInAnonymously",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.v0)(),e.next=3,(0,l.XB)(r);case 3:return n=e.sent,e.abrupt("return",this.createSignInResult(n,null));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signInWithApple",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.O4(f.F.APPLE),this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.O4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithCustomToken",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.next=3,(0,l._p)(n,r.token);case 3:return t=e.sent,e.abrupt("return",this.createSignInResult(t,null));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithEmailAndPassword",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.next=3,(0,l.e5)(n,r.email,r.password);case 3:return t=e.sent,e.abrupt("return",this.createSignInResult(t,null));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithEmailLink",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.v0)(),e.next=3,(0,l.P6)(n,r.email,r.emailLink);case 3:return t=e.sent,e.abrupt("return",this.createSignInResult(t,null));case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithFacebook",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l._O,this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l._O.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithGithub",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.GH,this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.GH.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithGoogle",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.hJ,this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.hJ.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithMicrosoft",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.O4(f.F.MICROSOFT),this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.O4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithPhoneNumber",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.phoneNumber){e.next=2;break}throw new Error(n.ERROR_PHONE_NUMBER_MISSING);case 2:if(r.recaptchaVerifier&&r.recaptchaVerifier instanceof l.lI){e.next=4;break}throw new Error(n.ERROR_RECAPTCHA_VERIFIER_MISSING);case 4:return t=(0,l.v0)(),e.prev=5,e.next=8,(0,l.$g)(t,r.phoneNumber,r.recaptchaVerifier);case 8:i=e.sent,u=i.verificationId,this.lastConfirmationResult.set(u,i),s={verificationId:u},this.notifyListeners(n.PHONE_CODE_SENT_EVENT,s),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),c={message:this.getErrorMessage(e.t0)},this.notifyListeners(n.PHONE_VERIFICATION_FAILED_EVENT,c);case 19:case"end":return e.stop()}}),e,this,[[5,15]])})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithPlayGames",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not available on web.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"signInWithGameCenter",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not available on web.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"signInWithTwitter",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.c4,this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.c4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signInWithYahoo",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.O4(f.F.YAHOO),this.applySignInOptions(r||{},n),e.next=4,this.signInWithPopupOrRedirect(n,null===r||void 0===r?void 0:r.mode);case 4:return t=e.sent,i=l.O4.credentialFromResult(t),e.abrupt("return",this.createSignInResult(t,i));case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.v0)(),e.next=3,r.signOut();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"unlink",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=(0,l.v0)()).currentUser){e.next=3;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 3:return e.next=5,(0,l.qB)(t.currentUser,r.providerId);case 5:return i=e.sent,u=this.createUserResult(i),s={user:u},e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,l.v0)(),i=t.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:return e.abrupt("return",(0,l.s)(i,r.newEmail));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"updatePassword",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,l.v0)(),i=t.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:return e.abrupt("return",(0,l.gQ)(i,r.newPassword));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,l.v0)(),i=t.currentUser){e.next=4;break}throw new Error(n.ERROR_NO_USER_SIGNED_IN);case 4:return e.abrupt("return",(0,l.ck)(i,r));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"useAppLanguage",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.v0)().useDeviceLanguage();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"useEmulator",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,l.v0)(),t=r.port||9099,i=r.scheme||"http",r.host.includes("://")?(0,l.S$)(n,"".concat(r.host,":").concat(t)):(0,l.S$)(n,"".concat(i,"://").concat(r.host,":").concat(t));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"handleAuthStateChange",value:function(e){var r={user:this.createUserResult(e)};this.notifyListeners(n.AUTH_STATE_CHANGE_EVENT,r)}},{key:"applySignInOptions",value:function(e,r){if(e.customParameters){var n={};e.customParameters.map((function(e){n[e.key]=e.value})),r.setCustomParameters(n)}if(e.scopes){var a,i=(0,t.Z)(e.scopes);try{for(i.s();!(a=i.n()).done;){var u=a.value;r.addScope(u)}}catch(s){i.e(s)}finally{i.f()}}}},{key:"signInWithPopupOrRedirect",value:function(e,r){var n=(0,l.v0)();return"redirect"===r?(0,l.F6)(n,e):(0,l.rh)(n,e)}},{key:"linkCurrentUserWithPopupOrRedirect",value:function(e,r){var t=(0,l.v0)();if(!t.currentUser)throw new Error(n.ERROR_NO_USER_SIGNED_IN);return"redirect"===r?(0,l.WV)(t.currentUser,e):(0,l.k9)(t.currentUser,e)}},{key:"linkCurrentUserWithCredential",value:function(e){var r=(0,l.v0)();if(!r.currentUser)throw new Error(n.ERROR_NO_USER_SIGNED_IN);return(0,l.ZJ)(r.currentUser,e)}},{key:"createSignInResult",value:function(e,r){return{user:this.createUserResult((null===e||void 0===e?void 0:e.user)||null),credential:this.createCredentialResult(r),additionalUserInfo:this.createAdditionalUserInfoResult(e)}}},{key:"createCredentialResult",value:function(e){if(!e)return null;var r={providerId:e.providerId};return e instanceof l.jh&&(r.accessToken=e.accessToken,r.idToken=e.idToken,r.secret=e.secret),r}},{key:"createUserResult",value:function(e){return e?{displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,metadata:this.createUserMetadataResult(e.metadata),phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerData:this.createUserProviderDataResult(e.providerData),providerId:e.providerId,tenantId:e.tenantId,uid:e.uid}:null}},{key:"createUserMetadataResult",value:function(e){var r={};return e.creationTime&&(r.creationTime=Date.parse(e.creationTime)),e.lastSignInTime&&(r.lastSignInTime=Date.parse(e.lastSignInTime)),r}},{key:"createUserProviderDataResult",value:function(e){return e.map((function(e){return{displayName:e.displayName,email:e.email,phoneNumber:e.phoneNumber,photoUrl:e.photoURL,providerId:e.providerId,uid:e.uid}}))}},{key:"createAdditionalUserInfoResult",value:function(e){if(!e)return null;var r=(0,l.gK)(e);if(!r)return null;var n=r.isNewUser,t=r.profile,a=r.providerId,i=r.username,u={isNewUser:n};return null!==a&&(u.providerId=a),null!==t&&(u.profile=t),null!==i&&void 0!==i&&(u.username=i),u}},{key:"getErrorMessage",value:function(e){return e instanceof Object&&"message"in e&&"string"===typeof e.message?e.message:JSON.stringify(e)}}]),n}(p.Uw);h.AUTH_STATE_CHANGE_EVENT="authStateChange",h.PHONE_CODE_SENT_EVENT="phoneCodeSent",h.PHONE_VERIFICATION_FAILED_EVENT="phoneVerificationFailed",h.ERROR_NO_USER_SIGNED_IN="No user is signed in.",h.ERROR_PHONE_NUMBER_MISSING="phoneNumber must be provided.",h.ERROR_RECAPTCHA_VERIFIER_MISSING="recaptchaVerifier must be provided and must be an instance of RecaptchaVerifier.",h.ERROR_CONFIRMATION_RESULT_MISSING="No confirmation result with this verification id was found."}}]);